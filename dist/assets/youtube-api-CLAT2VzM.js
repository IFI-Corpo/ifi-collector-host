import{c as l}from"./index-BKU-kTC2.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_=l("Eye",f);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],P=l("Heart",k);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],$=l("Share",I),w="AIzaSyDPE1bdcOlvjYstp0yAAjXekAVgMsv9NrI",S="AIzaSyDMm6SM7x9zKkxV_5WdpwG-wJRusN7xm0E",p=e=>{if(!e)return"N/A";const t=typeof e=="string"?parseInt(e):e;return isNaN(t)?"N/A":t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toLocaleString()},D=e=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(e),A=e=>{const t=new Date;switch(e){case"last hour":t.setHours(t.getHours()-1);break;case"today":t.setHours(0,0,0,0);break;case"this week":t.setDate(t.getDate()-7);break;case"this month":t.setMonth(t.getMonth()-1);break;case"this year":t.setFullYear(t.getFullYear()-1);break;default:return""}return t.toISOString()},M=e=>{const t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!t)return 0;const s=parseInt(t[1]||"0",10),r=parseInt(t[2]||"0",10),a=parseInt(t[3]||"0",10);return s*3600+r*60+a},j=async e=>{var t,s,r,a,u;try{const c=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${S}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Provide a concise summary of this YouTube video: ${e}`}]}]})})).json();return console.log("Gemini API response:",c),((u=(a=(r=(s=(t=c.candidates)==null?void 0:t[0])==null?void 0:s.content)==null?void 0:r.parts)==null?void 0:a[0])==null?void 0:u.text)||"No summary available."}catch(i){return console.error("Gemini API error:",i),"Error generating summary."}},Y=async(e,t=10,s={})=>{var r;try{const a=new URLSearchParams({part:"snippet",type:"video",maxResults:t.toString(),q:e,key:w});if(s.sortBy)switch(s.sortBy){case"view count":a.set("order","viewCount");break;case"upload date":a.set("order","date");break;case"rating":a.set("order","rating");break;default:a.set("order","relevance")}if(s.uploadDate&&a.set("publishedAfter",A(s.uploadDate)),s.platforms&&!s.platforms.includes("YouTube"))return[];const i=await(await fetch(`https://www.googleapis.com/youtube/v3/search?${a}`)).json();if(!((r=i.items)!=null&&r.length))return[];const c=i.items.map(o=>o.id.videoId),b=await(await fetch(`https://www.googleapis.com/youtube/v3/videos?part=statistics,snippet,contentDetails&id=${c.join(",")}&key=${w}`)).json(),m=new Map;return b.items.forEach(o=>{m.set(o.id,o)}),i.items.map(o=>{var y,g;const n=m.get(o.id.videoId);if(!n)return null;const h=M(n.contentDetails.duration);if(s.duration&&(s.duration==="short"&&h>60||s.duration==="long"&&h<60))return null;const d=n.statistics||{},v=`https://www.youtube.com/watch?v=${n.id}`;return{title:n.snippet.title,description:n.snippet.description,summary:"",url:v,views:p(d.viewCount),likes:p(d.likeCount),comments:p(d.commentCount),publishedAt:D(new Date(n.snippet.publishedAt)),thumbnail:((g=(y=n.snippet.thumbnails)==null?void 0:y.medium)==null?void 0:g.url)||"/fallback-thumbnail.jpg"}}).filter(o=>o!==null)}catch(a){return console.error("YouTube API error:",a),[]}};export{_ as E,P as H,$ as S,j as g,Y as y};
